# 12 - 兼容性矩阵：各模块之间到底能不能配合？

> **这份文档回答你最核心的问题：买了 A，能不能接 B？**

---

## 🔗 核心连接关系图

```
                    ┌─────────────────┐
                    │   x86 主机      │
                    │  (Ubuntu Linux) │
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
         ▼                   ▼                   ▼
    ┌─────────┐        ┌─────────┐        ┌─────────┐
    │  USB 1  │        │  USB 2  │        │  USB 3  │
    │ 串口    │        │ 深度相机│        │ 激光雷达│
    └────┬────┘        └────┬────┘        └────┬────┘
         │                  │                  │
         ▼                  ▼                  ▼
    ┌─────────┐        ┌─────────┐        ┌─────────┐
    │ STM32   │        │RealSense│        │ RPLIDAR │
    │(小车/臂)│        │ D435i   │        │   A1    │
    └────┬────┘        └─────────┘        └─────────┘
         │
    ┌────┴────────────────┐
    │                     │
    ▼                     ▼
┌─────────┐         ┌─────────┐
│ 底盘电机 │         │ 机械臂  │
│ + 舵机   │         │ 舵机    │
└─────────┘         └─────────┘
```

---

## ✅ 兼容性矩阵

### 主机 ↔ 其他模块

| 模块 | 接口 | 兼容性 | 说明 |
|------|------|--------|------|
| **STM32 小车** | USB 串口 (CH340/CP2102) | ✅ **100% 兼容** | 所有 x86 主机都有 USB |
| **RealSense D435i** | USB 3.0 | ✅ **100% 兼容** | 需要 USB 3.0 口 |
| **RPLIDAR A1** | USB 串口 | ✅ **100% 兼容** | 标准串口协议 |
| **ReSpeaker 麦克风** | USB | ✅ **100% 兼容** | 标准 USB 音频设备 |
| **7寸显示屏** | HDMI | ✅ **100% 兼容** | 所有主板都有 HDMI |
| **机械臂驱动板** | USB 串口 | ✅ **100% 兼容** | 飞特舵机驱动板用串口 |

**结论：x86 主机与所有外设都是 USB/HDMI 连接，天然兼容。**

---

### 底盘 ↔ 主机

| 问题 | 答案 |
|------|------|
| 底盘和主机怎么连？ | **不直接连！** 底盘由 STM32 控制，STM32 通过 USB 串口连主机 |
| 买什么底盘都行？ | **是的**，只要能被 STM32 驱动 |
| 需要特定接口吗？ | **不需要**，底盘电机由 L298N 驱动，L298N 由 STM32 控制 |

**底盘兼容性 = 底盘 ↔ STM32 的兼容性**，而不是底盘 ↔ 主机

```
x86 主机 ──USB 串口──▶ STM32 ──GPIO/PWM──▶ L298N ──▶ 电机
```

**你已经验证了 STM32 能控制电机，所以任何标准直流电机底盘都能用。**

---

### 机械臂 ↔ 主机

| 问题 | 答案 |
|------|------|
| 机械臂和主机怎么连？ | **USB 串口连接舵机驱动板** |
| 机械臂需要特定主机吗？ | **不需要**，只要有 USB 口 |
| 机械臂和底盘冲突吗？ | **不冲突**，各走各的串口 |

**机械臂连接方式**：

```
方案 A（简单）：
x86 主机 ──USB 串口──▶ 舵机驱动板 ──▶ 舵机

方案 B（复用 STM32）：
x86 主机 ──USB 串口──▶ STM32 ──GPIO/串口──▶ 舵机驱动板 ──▶ 舵机
```

**你可以选择任一方案，都兼容。**

---

### 雷达 ↔ 主机/底盘

| 问题 | 答案 |
|------|------|
| 雷达和主机怎么连？ | **USB 直连主机** |
| 雷达需要特定底盘吗？ | **不需要**，雷达是独立模块 |
| 雷达放哪里？ | 底盘最高点，360° 无遮挡 |

**雷达完全独立，不依赖底盘型号**：

```
x86 主机 ──USB──▶ RPLIDAR A1
                    │
                    ▼
              [360° 扫描]
```

---

### 深度相机 ↔ 主机/底盘

| 问题 | 答案 |
|------|------|
| 相机和主机怎么连？ | **USB 3.0 直连主机** |
| 相机需要特定底盘吗？ | **不需要** |
| 相机放哪里？ | 机器人"头部"位置，朝前 |

**深度相机完全独立，不依赖其他模块**：

```
x86 主机 ──USB 3.0──▶ RealSense D435i
                         │
                         ▼
                   [RGB + 深度图]
```

---

## 🔌 接口需求汇总

### x86 主机需要提供的接口

| 接口类型 | 数量 | 用途 |
|----------|------|------|
| USB 3.0 | 1 个 | RealSense D435i（必须 USB 3.0） |
| USB 2.0 | 4 个 | STM32 串口、雷达、麦克风、机械臂驱动板 |
| HDMI | 1 个 | 显示屏 |
| 音频输出 | 1 个 | 扬声器 |

**绝大多数主板都有**：
- 2 个 USB 3.0
- 4 个 USB 2.0
- 1 个 HDMI
- 1 个音频输出

**如果 USB 口不够 → 买 USB Hub（¥30）**

---

## 🧩 各模块之间的依赖关系

```
依赖图（箭头表示"依赖于"）：

深度相机 ──────────────┐
                      │
激光雷达 ──────────────┼──▶ x86 主机
                      │
麦克风 ────────────────┤
                      │
机械臂驱动板 ──────────┤
                      │
STM32 ─────────────────┤
   │                  │
   ▼                  │
底盘电机              │
   │                  │
   ▼                  │
底盘（机械结构）──────┘ （只是物理承载）
```

**关键发现**：
1. **所有电子模块都只依赖 x86 主机**（通过 USB）
2. **底盘只是"物理载体"**，不参与电子连接
3. **各模块之间没有直接依赖**

---

## 🎯 所以你的担忧答案是：

### 问题 1：主机买了，底盘适配吗？

**答：底盘和主机没有直接电子连接。**
- 底盘只是"物理载体"
- 只要底盘能放下主机，就"适配"
- 电气上，底盘电机由 STM32 控制，和主机无关

**唯一需要确认的**：
- 底盘尺寸够不够放主机？（≥25×25cm）
- 底盘承重够不够？（≥5kg）

---

### 问题 2：主机买了，机械臂适配吗？

**答：100% 适配。**
- 机械臂通过 USB 串口连主机
- 任何 x86 主机都有 USB 口
- 机械臂不依赖任何特定硬件

---

### 问题 3：雷达和相机适配主机吗？

**答：100% 适配。**
- 雷达 = USB 串口设备 → 任何 x86 主机都支持
- 相机 = USB 3.0 设备 → 需要主板有 USB 3.0 口（绝大多数都有）

---

### 问题 4：底盘、机械臂、雷达、相机这四个之间适配吗？

**答：它们之间没有电子连接，不存在"适配"问题。**

它们的关系是：

```
底盘 = 物理载体（放东西的架子）
机械臂 = 安装在底盘上的模块
雷达 = 安装在底盘上的模块
相机 = 安装在底盘上的模块

它们都通过 USB 独立连接到 x86 主机，互不干扰。
```

**唯一的"适配"是物理空间**：底盘上有没有位置放这些东西？

---

## 📋 确保兼容的采购检查清单

### 买主机前确认

- [ ] 有 USB 3.0 口吗？（至少 1 个，给相机）
- [ ] USB 口总数够吗？（至少 5 个，或配 USB Hub）
- [ ] 有 HDMI 口吗？
- [ ] 尺寸是多少？（记下来，买底盘时用）

### 买底盘前确认

- [ ] 底盘尺寸够吗？（≥主机尺寸 + 5cm 余量）
- [ ] 承重够吗？（≥5kg）
- [ ] 有上层平台吗？（放主机用）
- [ ] 电机是直流电机吗？（L298N 能驱动）

### 买雷达前确认

- [ ] USB 口还有空余吗？
- [ ] 底盘上有位置放雷达吗？（最高点，无遮挡）

### 买相机前确认

- [ ] USB 3.0 口还有空余吗？
- [ ] 有位置装相机支架吗？

### 买机械臂前确认

- [ ] USB 口还有空余吗？
- [ ] 底盘有位置装机械臂底座吗？
- [ ] 机械臂重量会不会让底盘头重脚轻？

---

## ✅ 总结：你可以放心买的原因

| 担忧 | 事实 |
|------|------|
| "主机和底盘不兼容" | **不存在**，它们没有电子连接 |
| "主机和机械臂不兼容" | **不存在**，USB 串口万能兼容 |
| "雷达和相机不兼容" | **不存在**，它们各自独立连主机 |
| "四个大件互相不兼容" | **不存在**，它们只有物理空间关系 |

**真正需要担心的只有一件事：物理空间够不够？**

解决方案：
1. 买主机时记下尺寸
2. 买底盘时选≥25×25cm 的
3. 买其他模块时先确认有位置放

---

**文档版本**: v1.0  
**更新日期**: 2026-01-18
